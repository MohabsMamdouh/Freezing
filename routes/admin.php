<?php

use Illuminate\Support\Facades\Route;
use Illuminate\Support\Facades\Auth;

/*
|--------------------------------------------------------------------------
| Admin Routes
|--------------------------------------------------------------------------
|
| Here is where Admin can Control The application.
|
*/

Route::group(['middleware' => 'language'], function () {

    Route::middleware('App\Http\middleware\RequireRole:Admin')->group(function () {
        // Home Controller Pathes
        Route::controller(App\Http\Controllers\HomeController::class)->group(function () {
            // Dashboard
            Route::get('dashboard', 'AdminHome')->name('AdminDashboard');
            Route::get('/', function ()
            {
                return redirect(route('AdminDashboard'));
            });
        });

        // Site Controller Pathes
        Route::controller(\App\Http\Controllers\SiteController::class)->group(function () {
            // Update Settings
            Route::get('{id}/settings', 'edit')->name('settings');
            Route::post('{id}/settings', 'update')->name('updateSetting');
        });

        // Feedbacks Pathes
        Route::controller(\App\Http\Controllers\FeedbackController::class)->group(function () {
            // Show all Feedback
            // Route::get('/feedback', 'index')->name('feedback');

            // Create Feedback
            Route::get('feedback/create', 'create')->name('CreateFeedback');
            Route::post('feedback/store', 'store')->name('StoreFeedback');
        });

        // Technical Controller Pathes
        Route::controller(\App\Http\Controllers\TechnicalController::class)->group(function () {
            // Show all User
            Route::get('technicals', 'index')->name('technicals');

            // Show Individual User
            Route::get('{id}/technicals/show', 'show')->name('showTechnicals');

            // Create Technical
            Route::get('technicals/create', 'create')->name('createTechnicals');
            Route::post('technicals/store', 'store')->name('storeTechnicals');

            // Update Technical
            Route::get('technicals/{id}/edit', 'edit')->name('EditTechnicals');
            Route::post('technicals/update', 'update')->name('UpdateTechnicals');

            // Delete Technical
            Route::get('technicals/{id}/delete', 'destroy')->name('DeleteTechnicals');
        });

        // Pricing Controller Pathes
        Route::controller(\App\Http\Controllers\PriceController::class)->group(function () {
            Route::get('price/{id}/plan', 'show')->name('ShowPlan');
            Route::post('price/update', 'update')->name('UpdatePlan');
        });


        // Job Controller Pathes
        Route::controller(\App\Http\Controllers\JobController::class)->group(function () {
            // Show New Jobs
            Route::get('job/{status}/new', 'index')->name('NewJob');

            // Show Current Jobs
            Route::get('job/{status}/current', 'index')->name('CurrentJob');

            // Show Finish Jobs
            Route::get('job/{status}/finish', 'index')->name('FinishJob');

            // Show Finish Jobs
            Route::get('job/{status}/cancel', 'index')->name('CancelJob');

            // Show Individual Job
            Route::get('job/{id}/show', 'show')->name('ShowJob');

            // Assign job To technical
            Route::post('job/assignto', 'assignTo')->name('AssignTo');

            // Make Complete
            Route::get('job/{id}/status-complete', 'updateStatus')->name('updateStatus');

            // Edit Job
            Route::get('job/{id}/edit', 'edit')->name('EditJob');
            Route::post('job/update', 'update')->name('UpdateJob');

            // Create Jobs
            Route::get('job/create', 'create')->name('CreateJobs');
            Route::post('job/store', 'store')->name('StoreJobs');
        });
    });

});


